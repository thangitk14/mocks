<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ThangTP</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <style>
    /* To√†n c·ª•c: ngƒÉn tr√†n v√† ƒë·∫£m b·∫£o chi·ªÅu ngang */
    * {
      box-sizing: border-box;
    }

    html,
    body {
      max-width: 100%;
      overflow-x: hidden;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #f7f7f7;
    }

    h1 {
      text-align: center;
      font-size: 24px;
    }

    form,
    .qr-wrapper {
      max-width: 500px;
      margin: 0 auto;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      width: 100%;
    }

    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }

    input,
    select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 16px;
      background-color: #007bff;
      color: #fff;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background-color: #0056b3;
    }

    #qrcode,
    #imageBank {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #qrcode canvas,
    #qrcode img {
      max-width: 80%;
      height: auto;
      display: block;
    }

    #error {
      color: #FF0000
    }

    @media (max-width: 600px) {
      body {}

      h1 {
        font-size: 20px;
      }

      form,
      .qr-wrapper {
        padding: 15px;
        border-radius: 0;
        max-width: none;
        box-shadow: none;
      }

      button {
        padding: 12px;
        font-size: 16px;
      }

      input,
      select {
        padding: 10px;
        font-size: 16px;
      }

      #qrcode canvas,
      #qrcode img {
        width: 80%;
        height: auto;
      }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>
  <h1>Tr·∫ßn Th·ªã C·∫©m Ti√™n</h1>
  <form id="qrForm">
    <label for="bank">Ch·ªçn Ng√¢n H√†ng:</label>
    <select id="bank">
    </select>
    <span id="bankName"></span>
    <br>

    <label for="account">S·ªë T√†i Kho·∫£n:</label>
    <input type="text" id="account" value="73010001146740" required><br>

    <label for="amount">S·ªë Ti·ªÅn (t√πy ch·ªçn, VND):</label>
    <input type="number" id="amount"><br>
    <span id="error"></span>

    <div class="qr-wrapper">
      <div id="imageBank"></div>
      <div id="qrcode"></div>
      <br>
      <button type="button" onclick="downLoadQR()">T·∫£i QRCode</button>
    </div>

    <label for="name">T√™n Ch·ªß T√†i Kho·∫£n:</label>
    <input type="text" id="name" value="TRAN THI CAM TIEN" required><br><br>

    <label for="desc">N·ªôi Dung Chuy·ªÉn Kho·∫£n (t√πy ch·ªçn):</label>
    <input type="text" value="Chuyen den tienttc" id="desc"><br><br>


  </form>


  <script>
    // API https://api.vietqr.io/v2/banks
    const bankStrings = '{"code":"00","desc":"Get Bank list successful! Total 64 banks","data":[{"id":17,"name":"Ng√¢n h√†ng TMCP C√¥ng th∆∞∆°ng Vi·ªát Nam","code":"ICB","bin":"970415","shortName":"VietinBank","logo":"https://api.vietqr.io/img/ICB.png","transferSupported":1,"lookupSupported":1,"short_name":"VietinBank","support":3,"isTransfer":1,"swift_code":"ICBVVNVX"},{"id":43,"name":"Ng√¢n haÃÄng TMCP NgoaÃ£i Th∆∞∆°ng Vi√™Ã£t Nam","code":"VCB","bin":"970436","shortName":"Vietcombank","logo":"https://api.vietqr.io/img/VCB.png","transferSupported":1,"lookupSupported":1,"short_name":"Vietcombank","support":3,"isTransfer":1,"swift_code":"BFTVVNVX"},{"id":4,"name":"Ng√¢n h√†ng TMCP ƒê·∫ßu t∆∞ v√† Ph√°t tri·ªÉn Vi·ªát Nam","code":"BIDV","bin":"970418","shortName":"BIDV","logo":"https://api.vietqr.io/img/BIDV.png","transferSupported":1,"lookupSupported":1,"short_name":"BIDV","support":3,"isTransfer":1,"swift_code":"BIDVVNVX"},{"id":42,"name":"Ng√¢n h√†ng N√¥ng nghi·ªáp v√† Ph√°t tri·ªÉn N√¥ng th√¥n Vi·ªát Nam","code":"VBA","bin":"970405","shortName":"Agribank","logo":"https://api.vietqr.io/img/VBA.png","transferSupported":1,"lookupSupported":1,"short_name":"Agribank","support":3,"isTransfer":1,"swift_code":"VBAAVNVX"},{"id":26,"name":"Ng√¢n h√†ng TMCP Ph∆∞∆°ng ƒê√¥ng","code":"OCB","bin":"970448","shortName":"OCB","logo":"https://api.vietqr.io/img/OCB.png","transferSupported":1,"lookupSupported":1,"short_name":"OCB","support":3,"isTransfer":1,"swift_code":"ORCOVNVX"},{"id":21,"name":"Ng√¢n h√†ng TMCP Qu√¢n ƒë·ªôi","code":"MB","bin":"970422","shortName":"MBBank","logo":"https://api.vietqr.io/img/MB.png","transferSupported":1,"lookupSupported":1,"short_name":"MBBank","support":3,"isTransfer":1,"swift_code":"MSCBVNVX"},{"id":38,"name":"Ng√¢n h√†ng TMCP K·ªπ th∆∞∆°ng Vi·ªát Nam","code":"TCB","bin":"970407","shortName":"Techcombank","logo":"https://api.vietqr.io/img/TCB.png","transferSupported":1,"lookupSupported":1,"short_name":"Techcombank","support":3,"isTransfer":1,"swift_code":"VTCBVNVX"},{"id":2,"name":"Ng√¢n h√†ng TMCP √Å Ch√¢u","code":"ACB","bin":"970416","shortName":"ACB","logo":"https://api.vietqr.io/img/ACB.png","transferSupported":1,"lookupSupported":1,"short_name":"ACB","support":3,"isTransfer":1,"swift_code":"ASCBVNVX"},{"id":47,"name":"Ng√¢n h√†ng TMCP Vi·ªát Nam Th·ªãnh V∆∞·ª£ng","code":"VPB","bin":"970432","shortName":"VPBank","logo":"https://api.vietqr.io/img/VPB.png","transferSupported":1,"lookupSupported":1,"short_name":"VPBank","support":3,"isTransfer":1,"swift_code":"VPBKVNVX"},{"id":39,"name":"Ng√¢n h√†ng TMCP Ti√™n Phong","code":"TPB","bin":"970423","shortName":"TPBank","logo":"https://api.vietqr.io/img/TPB.png","transferSupported":1,"lookupSupported":1,"short_name":"TPBank","support":3,"isTransfer":1,"swift_code":"TPBVVNVX"},{"id":36,"name":"Ng√¢n h√†ng TMCP S√†i G√≤n Th∆∞∆°ng T√≠n","code":"STB","bin":"970403","shortName":"Sacombank","logo":"https://api.vietqr.io/img/STB.png","transferSupported":1,"lookupSupported":1,"short_name":"Sacombank","support":3,"isTransfer":1,"swift_code":"SGTTVNVX"},{"id":12,"name":"Ng√¢n h√†ng TMCP Ph√°t tri·ªÉn Th√†nh ph·ªë H·ªì Ch√≠ Minh","code":"HDB","bin":"970437","shortName":"HDBank","logo":"https://api.vietqr.io/img/HDB.png","transferSupported":1,"lookupSupported":1,"short_name":"HDBank","support":3,"isTransfer":1,"swift_code":"HDBCVNVX"},{"id":44,"name":"Ng√¢n haÃÄng TMCP BaÃân Vi√™Ã£t","code":"VCCB","bin":"970454","shortName":"VietCapitalBank","logo":"https://api.vietqr.io/img/VCCB.png","transferSupported":1,"lookupSupported":1,"short_name":"VietCapitalBank","support":3,"isTransfer":1,"swift_code":"VCBCVNVX"},{"id":31,"name":"Ng√¢n h√†ng TMCP S√†i G√≤n","code":"SCB","bin":"970429","shortName":"SCB","logo":"https://api.vietqr.io/img/SCB.png","transferSupported":1,"lookupSupported":1,"short_name":"SCB","support":3,"isTransfer":1,"swift_code":"SACLVNVX"},{"id":45,"name":"Ng√¢n haÃÄng TMCP Qu·ªëc t·∫ø Vi·ªát Nam","code":"VIB","bin":"970441","shortName":"VIB","logo":"https://api.vietqr.io/img/VIB.png","transferSupported":1,"lookupSupported":1,"short_name":"VIB","support":3,"isTransfer":1,"swift_code":"VNIBVNVX"},{"id":35,"name":"Ng√¢n h√†ng TMCP S√†i G√≤n - H√† N·ªôi","code":"SHB","bin":"970443","shortName":"SHB","logo":"https://api.vietqr.io/img/SHB.png","transferSupported":1,"lookupSupported":1,"short_name":"SHB","support":3,"isTransfer":1,"swift_code":"SHBAVNVX"},{"id":10,"name":"Ng√¢n h√†ng TMCP Xu·∫•t Nh·∫≠p kh·∫©u Vi·ªát Nam","code":"EIB","bin":"970431","shortName":"Eximbank","logo":"https://api.vietqr.io/img/EIB.png","transferSupported":1,"lookupSupported":1,"short_name":"Eximbank","support":3,"isTransfer":1,"swift_code":"EBVIVNVX"},{"id":22,"name":"Ng√¢n haÃÄng TMCP HaÃÄng HaÃâi Vi·ªát Nam","code":"MSB","bin":"970426","shortName":"MSB","logo":"https://api.vietqr.io/img/MSB.png","transferSupported":1,"lookupSupported":1,"short_name":"MSB","support":3,"isTransfer":1,"swift_code":"MCOBVNVX"},{"id":53,"name":"TMCP Vi·ªát Nam Th·ªãnh V∆∞·ª£ng - Ng√¢n h√†ng s·ªë CAKE by VPBank","code":"CAKE","bin":"546034","shortName":"CAKE","logo":"https://api.vietqr.io/img/CAKE.png","transferSupported":1,"lookupSupported":1,"short_name":"CAKE","support":3,"isTransfer":1,"swift_code":null},{"id":54,"name":"TMCP Vi·ªát Nam Th·ªãnh V∆∞·ª£ng - Ng√¢n h√†ng s·ªë Ubank by VPBank","code":"Ubank","bin":"546035","shortName":"Ubank","logo":"https://api.vietqr.io/img/UBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"Ubank","support":3,"isTransfer":1,"swift_code":null},{"id":57,"name":"T·ªïng C√¥ng ty D·ªãch v·ª• s·ªë Viettel - Chi nh√°nh t·∫≠p ƒëo√†n c√¥ng nghi·ªáp vi·ªÖn th√¥ng Qu√¢n ƒê·ªôi","code":"VTLMONEY","bin":"971005","shortName":"ViettelMoney","logo":"https://api.vietqr.io/img/VIETTELMONEY.png","transferSupported":0,"lookupSupported":1,"short_name":"ViettelMoney","support":0,"isTransfer":0,"swift_code":null},{"id":58,"name":"Ng√¢n h√†ng s·ªë Timo by Ban Viet Bank (Timo by Ban Viet Bank)","code":"TIMO","bin":"963388","shortName":"Timo","logo":"https://vietqr.net/portal-service/resources/icons/TIMO.png","transferSupported":1,"lookupSupported":0,"short_name":"Timo","support":0,"isTransfer":1,"swift_code":null},{"id":56,"name":"VNPT Money","code":"VNPTMONEY","bin":"971011","shortName":"VNPTMoney","logo":"https://api.vietqr.io/img/VNPTMONEY.png","transferSupported":0,"lookupSupported":1,"short_name":"VNPTMoney","support":0,"isTransfer":0,"swift_code":null},{"id":34,"name":"Ng√¢n h√†ng TMCP S√†i G√≤n C√¥ng Th∆∞∆°ng","code":"SGICB","bin":"970400","shortName":"SaigonBank","logo":"https://api.vietqr.io/img/SGICB.png","transferSupported":1,"lookupSupported":1,"short_name":"SaigonBank","support":3,"isTransfer":1,"swift_code":"SBITVNVX"},{"id":3,"name":"Ng√¢n h√†ng TMCP B·∫Øc √Å","code":"BAB","bin":"970409","shortName":"BacABank","logo":"https://api.vietqr.io/img/BAB.png","transferSupported":1,"lookupSupported":1,"short_name":"BacABank","support":3,"isTransfer":1,"swift_code":"NASCVNVX"},{"id":64,"name":"Ng√¢n haÃÄng TMCP ƒêaÃ£i ChuÃÅng Vi√™Ã£t Nam Ng√¢n h√†ng s·ªë","code":"PVDB","bin":"971133","shortName":"PVcomBank Pay","logo":"https://api.vietqr.io/img/PVCB.png","transferSupported":1,"lookupSupported":1,"short_name":"PVcomBank Pay","support":3,"isTransfer":1,"swift_code":"WBVNVNVX"},{"id":30,"name":"Ng√¢n haÃÄng TMCP ƒêaÃ£i ChuÃÅng Vi√™Ã£t Nam","code":"PVCB","bin":"970412","shortName":"PVcomBank","logo":"https://api.vietqr.io/img/PVCB.png","transferSupported":1,"lookupSupported":1,"short_name":"PVcomBank","support":3,"isTransfer":1,"swift_code":"WBVNVNVX"},{"id":27,"name":"Ng√¢n h√†ng TNHH MTV Vi·ªát Nam Hi·ªán ƒê·∫°i","code":"MBV","bin":"970414","shortName":"MBV","logo":"https://api.vietqr.io/img/MBV.png","transferSupported":1,"lookupSupported":1,"short_name":"MBV","support":3,"isTransfer":1,"swift_code":"OCBKUS3M"},{"id":24,"name":"Ng√¢n h√†ng TMCP Qu·ªëc D√¢n","code":"NCB","bin":"970419","shortName":"NCB","logo":"https://api.vietqr.io/img/NCB.png","transferSupported":1,"lookupSupported":1,"short_name":"NCB","support":3,"isTransfer":1,"swift_code":"NVBAVNVX"},{"id":37,"name":"Ng√¢n h√†ng TNHH MTV Shinhan Vi·ªát Nam","code":"SHBVN","bin":"970424","shortName":"ShinhanBank","logo":"https://api.vietqr.io/img/SHBVN.png","transferSupported":1,"lookupSupported":1,"short_name":"ShinhanBank","support":3,"isTransfer":1,"swift_code":"SHBKVNVX"},{"id":1,"name":"Ng√¢n h√†ng TMCP An B√¨nh","code":"ABB","bin":"970425","shortName":"ABBANK","logo":"https://api.vietqr.io/img/ABB.png","transferSupported":1,"lookupSupported":1,"short_name":"ABBANK","support":3,"isTransfer":1,"swift_code":"ABBKVNVX"},{"id":41,"name":"Ng√¢n h√†ng TMCP Vi·ªát √Å","code":"VAB","bin":"970427","shortName":"VietABank","logo":"https://api.vietqr.io/img/VAB.png","transferSupported":1,"lookupSupported":1,"short_name":"VietABank","support":3,"isTransfer":1,"swift_code":"VNACVNVX"},{"id":23,"name":"Ng√¢n h√†ng TMCP Nam √Å","code":"NAB","bin":"970428","shortName":"NamABank","logo":"https://api.vietqr.io/img/NAB.png","transferSupported":1,"lookupSupported":1,"short_name":"NamABank","support":3,"isTransfer":1,"swift_code":"NAMAVNVX"},{"id":29,"name":"Ng√¢n h√†ng TMCP Th·ªãnh v∆∞·ª£ng v√† Ph√°t tri·ªÉn","code":"PGB","bin":"970430","shortName":"PGBank","logo":"https://api.vietqr.io/img/PGB.png","transferSupported":1,"lookupSupported":1,"short_name":"PGBank","support":3,"isTransfer":1,"swift_code":"PGBLVNVX"},{"id":46,"name":"Ng√¢n h√†ng TMCP Vi·ªát Nam Th∆∞∆°ng T√≠n","code":"VIETBANK","bin":"970433","shortName":"VietBank","logo":"https://api.vietqr.io/img/VIETBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"VietBank","support":3,"isTransfer":1,"swift_code":"VNTTVNVX"},{"id":5,"name":"Ng√¢n h√†ng TMCP B·∫£o Vi·ªát","code":"BVB","bin":"970438","shortName":"BaoVietBank","logo":"https://api.vietqr.io/img/BVB.png","transferSupported":1,"lookupSupported":1,"short_name":"BaoVietBank","support":3,"isTransfer":1,"swift_code":"BVBVVNVX"},{"id":33,"name":"Ng√¢n haÃÄng TMCP ƒê√¥ng Nam AÃÅ","code":"SEAB","bin":"970440","shortName":"SeABank","logo":"https://api.vietqr.io/img/SEAB.png","transferSupported":1,"lookupSupported":1,"short_name":"SeABank","support":3,"isTransfer":1,"swift_code":"SEAVVNVX"},{"id":52,"name":"Ng√¢n h√†ng H·ª£p t√°c x√£ Vi·ªát Nam","code":"COOPBANK","bin":"970446","shortName":"COOPBANK","logo":"https://api.vietqr.io/img/COOPBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"COOPBANK","support":3,"isTransfer":1,"swift_code":null},{"id":20,"name":"Ng√¢n h√†ng TMCP L·ªôc Ph√°t Vi·ªát Nam","code":"LPB","bin":"970449","shortName":"LPBank","logo":"https://api.vietqr.io/img/LPB.png","transferSupported":1,"lookupSupported":1,"short_name":"LPBank","support":3,"isTransfer":1,"swift_code":"LVBKVNVX"},{"id":19,"name":"Ng√¢n h√†ng TMCP Ki√™n Long","code":"KLB","bin":"970452","shortName":"KienLongBank","logo":"https://api.vietqr.io/img/KLB.png","transferSupported":1,"lookupSupported":1,"short_name":"KienLongBank","support":3,"isTransfer":1,"swift_code":"KLBKVNVX"},{"id":55,"name":"Ng√¢n h√†ng ƒê·∫°i ch√∫ng TNHH Kasikornbank","code":"KBank","bin":"668888","shortName":"KBank","logo":"https://api.vietqr.io/img/KBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"KBank","support":3,"isTransfer":1,"swift_code":"KASIVNVX"},{"id":62,"name":"C√¥ng ty T√†i ch√≠nh TNHH MTV Mirae Asset (Vi·ªát Nam) ","code":"MAFC","bin":"977777","shortName":"MAFC","logo":"https://api.vietqr.io/img/MAFC.png","transferSupported":0,"lookupSupported":0,"short_name":"MAFC","support":0,"isTransfer":0,"swift_code":null},{"id":61,"name":"Ng√¢n h√†ng KEB Hana ‚Äì Chi nh√°nh H√† N·ªôi","code":"KEBHANAHN","bin":"970467","shortName":"KEBHANAHN","logo":"https://api.vietqr.io/img/KEBHANAHN.png","transferSupported":0,"lookupSupported":0,"short_name":"KEBHANAHN","support":0,"isTransfer":0,"swift_code":null},{"id":60,"name":"Ng√¢n h√†ng KEB Hana ‚Äì Chi nh√°nh Th√†nh ph·ªë H·ªì Ch√≠ Minh","code":"KEBHANAHCM","bin":"970466","shortName":"KEBHanaHCM","logo":"https://api.vietqr.io/img/KEBHANAHCM.png","transferSupported":0,"lookupSupported":0,"short_name":"KEBHanaHCM","support":0,"isTransfer":0,"swift_code":null},{"id":59,"name":"Ng√¢n h√†ng Citibank, N.A. - Chi nh√°nh H√† N·ªôi","code":"CITIBANK","bin":"533948","shortName":"Citibank","logo":"https://api.vietqr.io/img/CITIBANK.png","transferSupported":0,"lookupSupported":0,"short_name":"Citibank","support":0,"isTransfer":0,"swift_code":null},{"id":63,"name":"Ng√¢n h√†ng Ch√≠nh s√°ch X√£ h·ªôi","code":"VBSP","bin":"999888","shortName":"VBSP","logo":"https://api.vietqr.io/img/VBSP.png","transferSupported":0,"lookupSupported":0,"short_name":"VBSP","support":0,"isTransfer":0,"swift_code":null},{"id":6,"name":"Ng√¢n h√†ng Th∆∞∆°ng m·∫°i TNHH MTV X√¢y d·ª±ng Vi·ªát Nam","code":"CBB","bin":"970444","shortName":"CBBank","logo":"https://api.vietqr.io/img/CBB.png","transferSupported":0,"lookupSupported":1,"short_name":"CBBank","support":0,"isTransfer":0,"swift_code":"GTBAVNVX"},{"id":7,"name":"Ng√¢n h√†ng TNHH MTV CIMB Vi·ªát Nam","code":"CIMB","bin":"422589","shortName":"CIMB","logo":"https://api.vietqr.io/img/CIMB.png","transferSupported":1,"lookupSupported":1,"short_name":"CIMB","support":0,"isTransfer":1,"swift_code":"CIBBVNVN"},{"id":8,"name":"DBS Bank Ltd - Chi nh√°nh Th√†nh ph·ªë H·ªì Ch√≠ Minh","code":"DBS","bin":"796500","shortName":"DBSBank","logo":"https://api.vietqr.io/img/DBS.png","transferSupported":0,"lookupSupported":0,"short_name":"DBSBank","support":0,"isTransfer":0,"swift_code":"DBSSVNVX"},{"id":9,"name":"Ng√¢n h√†ng TNHH MTV S·ªë Vikki","code":"Vikki","bin":"970406","shortName":"Vikki","logo":"https://api.vietqr.io/img/Vikki.png","transferSupported":0,"lookupSupported":1,"short_name":"Vikki","support":0,"isTransfer":0,"swift_code":"EACBVNVX"},{"id":28,"name":"Ng√¢n h√†ng TNHH MTV Public Vi·ªát Nam","code":"PBVN","bin":"970439","shortName":"PublicBank","logo":"https://api.vietqr.io/img/PBVN.png","transferSupported":0,"lookupSupported":1,"short_name":"PublicBank","support":0,"isTransfer":0,"swift_code":"VIDPVNVX"},{"id":51,"name":"Ng√¢n h√†ng Kookmin - Chi nh√°nh Th√†nh ph·ªë H·ªì Ch√≠ Minh","code":"KBHCM","bin":"970463","shortName":"KookminHCM","logo":"https://api.vietqr.io/img/KBHCM.png","transferSupported":0,"lookupSupported":0,"short_name":"KookminHCM","support":0,"isTransfer":0,"swift_code":null},{"id":50,"name":"Ng√¢n h√†ng Kookmin - Chi nh√°nh H√† N·ªôi","code":"KBHN","bin":"970462","shortName":"KookminHN","logo":"https://api.vietqr.io/img/KBHN.png","transferSupported":0,"lookupSupported":0,"short_name":"KookminHN","support":0,"isTransfer":0,"swift_code":null},{"id":49,"name":"Ng√¢n h√†ng TNHH MTV Woori Vi·ªát Nam","code":"WVN","bin":"970457","shortName":"Woori","logo":"https://api.vietqr.io/img/WVN.png","transferSupported":1,"lookupSupported":1,"short_name":"Woori","support":0,"isTransfer":1,"swift_code":null},{"id":48,"name":"Ng√¢n h√†ng Li√™n doanh Vi·ªát - Nga","code":"VRB","bin":"970421","shortName":"VRB","logo":"https://api.vietqr.io/img/VRB.png","transferSupported":0,"lookupSupported":1,"short_name":"VRB","support":0,"isTransfer":0,"swift_code":null},{"id":11,"name":"Ng√¢n h√†ng Th∆∞∆°ng m·∫°i TNHH MTV D·∫ßu Kh√≠ To√†n C·∫ßu","code":"GPB","bin":"970408","shortName":"GPBank","logo":"https://api.vietqr.io/img/GPB.png","transferSupported":0,"lookupSupported":1,"short_name":"GPBank","support":0,"isTransfer":0,"swift_code":"GBNKVNVX"},{"id":13,"name":"Ng√¢n h√†ng TNHH MTV Hong Leong Vi·ªát Nam","code":"HLBVN","bin":"970442","shortName":"HongLeong","logo":"https://api.vietqr.io/img/HLBVN.png","transferSupported":0,"lookupSupported":1,"short_name":"HongLeong","support":0,"isTransfer":0,"swift_code":"HLBBVNVX"},{"id":14,"name":"Ng√¢n h√†ng TNHH MTV HSBC (Vi·ªát Nam)","code":"HSBC","bin":"458761","shortName":"HSBC","logo":"https://api.vietqr.io/img/HSBC.png","transferSupported":0,"lookupSupported":1,"short_name":"HSBC","support":0,"isTransfer":0,"swift_code":"HSBCVNVX"},{"id":15,"name":"Ng√¢n haÃÄng C√¥ng nghi√™Ã£p HaÃÄn Qu√¥ÃÅc - Chi nhaÃÅnh HaÃÄ N√¥Ã£i","code":"IBK - HN","bin":"970455","shortName":"IBKHN","logo":"https://api.vietqr.io/img/IBK.png","transferSupported":0,"lookupSupported":0,"short_name":"IBKHN","support":0,"isTransfer":0,"swift_code":null},{"id":16,"name":"Ng√¢n haÃÄng C√¥ng nghi√™Ã£p HaÃÄn Qu√¥ÃÅc - Chi nhaÃÅnh TP. H√¥ÃÄ ChiÃÅ Minh","code":"IBK - HCM","bin":"970456","shortName":"IBKHCM","logo":"https://api.vietqr.io/img/IBK.png","transferSupported":0,"lookupSupported":0,"short_name":"IBKHCM","support":0,"isTransfer":0,"swift_code":null},{"id":25,"name":"Ng√¢n h√†ng Nonghyup - Chi nh√°nh H√† N·ªôi","code":"NHB HN","bin":"801011","shortName":"Nonghyup","logo":"https://api.vietqr.io/img/NHB.png","transferSupported":0,"lookupSupported":0,"short_name":"Nonghyup","support":0,"isTransfer":0,"swift_code":null},{"id":40,"name":"Ng√¢n h√†ng United Overseas - Chi nh√°nh TP. H·ªì Ch√≠ Minh","code":"UOB","bin":"970458","shortName":"UnitedOverseas","logo":"https://api.vietqr.io/img/UOB.png","transferSupported":0,"lookupSupported":1,"short_name":"UnitedOverseas","support":0,"isTransfer":0,"swift_code":null},{"id":18,"name":"Ng√¢n h√†ng TNHH Indovina","code":"IVB","bin":"970434","shortName":"IndovinaBank","logo":"https://api.vietqr.io/img/IVB.png","transferSupported":0,"lookupSupported":1,"short_name":"IndovinaBank","support":0,"isTransfer":0,"swift_code":null},{"id":32,"name":"Ng√¢n h√†ng TNHH MTV Standard Chartered Bank Vi·ªát Nam","code":"SCVN","bin":"970410","shortName":"StandardChartered","logo":"https://api.vietqr.io/img/SCVN.png","transferSupported":0,"lookupSupported":1,"short_name":"StandardChartered","support":0,"isTransfer":0,"swift_code":"SCBLVNVX"}]}';
    const bankObject = JSON.parse(bankStrings);
    const banks = bankObject?.data ?? [];
    let selectedBankName = '';

    // üî§ Sort theo shortName A-Z
    banks.sort((a, b) => a.shortName.localeCompare(b.shortName));
    const bankSelect = document.getElementById('bank');
    const imageBankDiv = document.getElementById('imageBank');

    banks.forEach(bank => {
      const option = document.createElement('option');
      option.value = bank.bin;
      option.textContent = bank.shortName;
      option.dataset.bin = bank.bin; // ‚úÖ G√°n name v√†o data attribute
      option.dataset.name = bank.name; // ‚úÖ G√°n name v√†o data attribute
      option.dataset.logo = bank.logo;

      // Hard-selected bank with code === 'BIDV'
      if (bank.shortName === 'BIDV') {
        option.selected = true;
        selectedBankName = `${bank.bin} - ${bank.name}`; // ‚Üê Ghi l·∫°i name ƒë·ªÉ hi·ªÉn th·ªã sau
        imageBankDiv.innerHTML = `<img src="${bank.logo}" alt="${bank.shortName}" width="100">`;
      }

      bankSelect.appendChild(option);
    });

    // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng ch·ªçn ng√¢n h√†ng
    const bankNameSpan = document.getElementById('bankName');
    bankNameSpan.textContent = selectedBankName;
    bankSelect.addEventListener('change', function() {
      const selectedOption = bankSelect.options[bankSelect.selectedIndex];
      const bin = selectedOption.dataset.bin;
      const name = selectedOption.dataset.name;
      bankNameSpan.textContent = `${bin} - ${name}` || '';

      const logo = selectedOption.dataset.logo;
      imageBankDiv.innerHTML = logo ?
        `<img src="${logo}" alt="${name}" width="100">` :
        '';
      setTimeout(() => {
        generateQR();
      }, 10);
    });

    function downLoadQR() {
      const qrContainer = document.getElementById("qrcode");

      // T√¨m <canvas> ho·∫∑c <img> b√™n trong
      const canvas = qrContainer.querySelector("canvas");
      const img = qrContainer.querySelector("img");

      let dataUrl = "";

      if (canvas) {
        dataUrl = canvas.toDataURL("image/png");
      } else if (img) {
        dataUrl = img.src;
      } else {
        alert("Kh√¥ng t√¨m th·∫•y QRCode ƒë·ªÉ t·∫£i.");
        return;
      }

      // T·∫°o link ·∫©n ƒë·ªÉ t·∫£i
      const link = document.createElement("a");
      link.href = dataUrl;
      link.download = "qrcode.png";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>
  <script>
    const amountSelector = document.getElementById('amount');
    amountSelector.addEventListener('input', function() {
      setTimeout(() => {
        generateQR();
      }, 10);
    });
    const accountSelector = document.getElementById('account');
    accountSelector.addEventListener('input', function() {
      setTimeout(() => {
        generateQR();
      }, 10);
    });
    const accountNameSelector = document.getElementById('name');
    accountNameSelector.addEventListener('input', function() {
      setTimeout(() => {
        generateQR();
      }, 10);
    });
    const descSelector = document.getElementById('desc');
    descSelector.addEventListener('input', function() {
      setTimeout(() => {
        generateQR();
      }, 10);
    });


    function generateQR() {
      const bankBin = document.getElementById('bank').value;
      const accountNo = document.getElementById('account').value;
      const accountName = document.getElementById('name').value;
      const amount = document.getElementById('amount').value;
      const desc = document.getElementById('desc').value;

      const errorSeletor = document.getElementById('error');

      if (!accountNo || !accountName || !bankBin) {
        errorSeletor.innerHTML = 'Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin.'
        return;
      }
      else {
        errorSeletor.innerHTML = ''
      }

      const payload = genPayloadQR(bankBin, accountNo, accountName, amount, desc);
      // T·∫°o QR Code v·ªõi m·ª©c s·ª≠a l·ªói 'L' ƒë·ªÉ tr√°nh l·ªói overflow
      document.getElementById('qrcode').innerHTML = '';
      new QRCode(document.getElementById('qrcode'), {
        text: payload,
        width: 256,
        height: 256,
        correctLevel: QRCode.CorrectLevel.L // Th√™m t√πy ch·ªçn n√†y ƒë·ªÉ tƒÉng dung l∆∞·ª£ng d·ªØ li·ªáu v√† tr√°nh l·ªói
      });
    }

    function genPayloadQR(bankBin, accountNo, accountName, amount, desc) {
      // X√¢y d·ª±ng Merchant Account Information (ID 38)
      const guid = 'A000000727';
      const guidField = '0010' + guid; // 00 + length + guid

      const bankField = '00' + bankBin.length.toString().padStart(2, '0') + bankBin;
      const accField = '01' + accountNo.length.toString().padStart(2, '0') + accountNo;
      const merchantSub = '01' + (bankField.length + accField.length).toString().padStart(2, '0') + bankField + accField;

      const serviceCode = '0208QRIBFTTA'; // QRIBFTTA cho chuy·ªÉn kho·∫£n ƒë·∫øn t√†i kho·∫£n
      const merchantAccountInfo = guidField + merchantSub + serviceCode;
      const merchantAccountField = '38' + merchantAccountInfo.length.toString().padStart(2, '0') + merchantAccountInfo;

      // Payload c∆° b·∫£n
      let payload = '000201'; // ID 00: 01

      // Point of Initiation Method (ID 01): 12 n·∫øu c√≥ amount (dynamic), 11 n·∫øu kh√¥ng (static)
      const poi = amount ? '12' : '11';
      payload += '0102' + poi;

      // Th√™m Merchant Account Info
      payload += merchantAccountField;

      // Transaction Currency (ID 53): 704 cho VND
      payload += '5303704';

      // Transaction Amount (ID 54) n·∫øu c√≥
      if (amount) {
        const amountStr = amount.toString();
        payload += '54' + amountStr.length.toString().padStart(2, '0') + amountStr;
      }

      // Country Code (ID 58): VN
      payload += '5802VN';

      // Merchant Name (ID 59)
      const nameStr = accountName.toUpperCase(); // Th∆∞·ªùng uppercase
      if (nameStr) {
        payload += '59' + nameStr.length.toString().padStart(2, '0') + nameStr;
      }

      // Additional Data (ID 62): Purpose of Transaction (08)
      if (desc) {
        const descField = '08' + desc.length.toString().padStart(2, '0') + desc;
        payload += '62' + descField.length.toString().padStart(2, '0') + descField;
      }

      // Chu·∫©n b·ªã cho CRC (ID 63)
      const tempPayload = payload + '6304';
      const crc = calculateCRC(tempPayload);
      payload += '6304' + crc;

      return payload;
    }

    function calculateCRC(data) {
      let crc = 0xFFFF;
      for (let i = 0; i < data.length; i++) {
        crc ^= data.charCodeAt(i) << 8;
        for (let j = 0; j < 8; j++) {
          crc = (crc & 0x8000) ? ((crc << 1) & 0xFFFF) ^ 0x1021 : (crc << 1) & 0xFFFF;
        }
      }
      return crc.toString(16).toUpperCase().padStart(4, '0');
    }

    setTimeout(() => {
      generateQR();
    }, 100);
  </script>
</body>

</html>